<app-topnav></app-topnav>

<!-- this will be an admin page -->
<div class="container mt-5">
  <nav class="navbar navbar-icon-top navbar-expand-lg navbar-dark bg-dark nav-shadow">

    <h2 class="navbar-brand" href="#">
        All Tickets
    </h2>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <div class="container">
            <button type="button" class="btn btn-outline-success" (click)="navigateToNewTicket()">New Ticket
              <i class="fa-solid fa-plus ms-1"></i>
            </button>
          </div>
        </li>
        <li class="nav-item">
          <div class="container">
            <button type="button" class="btn btn-outline-primary" (click)="loadOpenTickets()">View Open</button>
          </div>
        </li>
        <li class="nav-item">
          <div class="container">
            <button type="button" class="btn btn-outline-danger"(click)="loadClosedTickets()">View Closed</button>
          </div>
        </li>
        <li class="nav-item">
          <div class="container">
            <button type="button" class="btn btn-outline-info"(click)="loadTickets()">View All</button>
          </div>
        </li>


      </ul>

    </div>
  </nav>

  <table class="table table-dark table-striped table-hover mt-5">
    <thead>
      <tr>
        <th scope="col">Id</th>
        <th scope="col">Title</th>
        <th scope="col">Priority</th>
        <th scope="col">Date Submitted</th>
        <th scope="col">Submitted By</th>
        <th scope="col">Area</th>
        <th scope="col">Tool</th>
        <th scope="col">Manufacturer</th>
        <th scope="col">Info</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ticket of allTickets">
        <td>{{ticket.ticketId}}</td>
        <td>{{ticket.title}}</td>
        <td>{{ticket.priority}}</td>
        <td>{{ticket.dateSubmitted}}</td>
        <td>{{ticket.userId}}</td>
        <td>{{ticket.areaId}}</td>
        <td>{{ticket.equipmentId}}</td>
        <td>{{ticket.manufacturer}}</td>
        <td>
          <button class="btn btn-xs btn-link p-0" style="font-size: 25px" (click)="updateSelectedTicket(ticket)">
            <i class="fa-solid fa-circle-info" style="color: #8286c5"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<div
  class="modal"
  tabindex="-1"
  role="dialog"
  ngModel="displayQuestionModal"
  ngDefaultControl
  [ngStyle]="{ display: displayStyleModal } ">

  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title"> {{ userSelectedTicket.title }} </h4>
        <p class="modal-title"> Ticket Id: {{userSelectedTicket.ticketId}} </p>
      </div>
      <div class="modal-body">
       <p>modal body goes here</p>
      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-primary" (click)="EditTicket()">Next Question</button> -->
        <button type="button" class="btn btn-danger" (click)="closePopup()">Close</button>
      </div>
    </div>
  </div>
</div>
